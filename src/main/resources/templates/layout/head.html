<!--
   author: Dellen Shang
     <footer class="footer">Smart Public WorkManager Ver.1.0.0 Copyright© 株式会社日進サイエンティア</footer>
-->
<div th:fragment="header" class="header-w" xmlns:th="http://www.thymeleaf.org">
  <svg th:replace="layout/logos::svg_logos"></svg>
  <i-menu mode="horizontal" theme="light" class="header-wrap" @click.native="handleClickMenuOutSide">
    <link rel="stylesheet" :href="`${baseUrl}/static/css/pages/header.min.css`">
    <svg class="head-logo">
      <use xlink:href="#logo"></use>
    </svg>
    <!-- 注意这里是row-reverse，要反着方 -->
    <span style="padding-right: 30px; font-weight: bold; font-size: 16px;">{{ session.psSession.loginKanjiName }}</span>

    <dropdown trigger="hover">
      <a>
        <avatar class="white-avatar" style="background-color: rgb(113, 112, 112)">{{ session.psSession.loginKanjiName.slice(0, 1) }}</avatar>
      </a>
      <dropdown-menu slot="list">
        <dropdown-item @click.native="goProfile">
          {{ session.psSession.loginKanjiName }}
        </dropdown-item>
        <dropdown-item @click.native="logout">ログアウト</dropdown-item>
      </dropdown-menu>
    </dropdown>

    <dropdown trigger="hover" style="margin-right: 5px;">
      <a>
        <avatar class="white-avatar" style="background-color: var(--theme-mark)">テーマ</avatar>
      </a>
      <dropdown-menu slot="list">
        <dropdown-item v-for="item of themeList" :value="item" :name="item" :key="item"
          @click.native="Changetheme(item)">
          {{ item }}
        </dropdown-item>
      </dropdown-menu>
    </dropdown>
  </i-menu>
  <footer class="footer">Smart Public WorkManager Ver.1.0.0 Copyright© 株式会社日進サイエンティア</footer>
  <script th:inline="javascript">
    const HEADER = new Vue({
      el: '.header-w',
      data() {
        return {
          baseUrl: SIDER._data.baseUrl,
          session: [[${ session }]],
          themeList: ['デフォルト', 'クラシック', 'ナイト']
        }
      },
      methods: {
        logout() {
          location.href = '/logout'
        },
        goProfile() {
          // if (this.$route.path === '/sys/user/profile') {
          //   return
          // }
          // this.$router.push('/sys/user/profile')
        },
        // 点击顶部边栏时也关闭sider
        handleClickMenuOutSide() {
          SIDER._data.showSider = false
        }
      },
    })
  </script>
</div>