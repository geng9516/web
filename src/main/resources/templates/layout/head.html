<!--
   author: Dellen Shang
     <footer class="footer">Smart Public WorkManager Ver.1.0.0 Copyright© 株式会社日進サイエンティア</footer>
-->
<div th:fragment="header" class="header-w" xmlns:th="http://www.thymeleaf.org">
  <svg th:replace="layout/logos::svg_logos"></svg>
  <i-menu mode="horizontal" theme="light" class="header-wrap" @click.native="handleClickMenuOutSide">
    <link rel="stylesheet" :href="`${baseUrl}/static/css/pages/header.min.css`">
    <svg class="head-logo">
      <use xlink:href="#logo"></use>
    </svg>
    <!-- 注意这里是row-reverse，要反着方 -->
    <span style="padding-right: 30px; font-weight: bold; font-size: 16px;">{{ session.psSession.loginKanjiName }}</span>

    <dropdown trigger="hover">
      <a>
        <avatar style="background-color: rgb(113, 112, 112)">{{ session.psSession.loginKanjiName.slice(0, 1) }}</avatar>
      </a>
      <dropdown-menu slot="list">
        <dropdown-item @click.native="goProfile">
          {{ session.psSession.loginKanjiName }}
        </dropdown-item>
        <dropdown-item @click.native="logout">ログアウト</dropdown-item>
      </dropdown-menu>
    </dropdown>

    <dropdown trigger="hover" style="margin-right: 5px;">
      <a>
        <avatar style="background-color: var(--theme-mark)">テーマ</avatar>
      </a>
      <dropdown-menu slot="list">
        <dropdown-item v-for="item of themeList" :value="item" :name="item" :key="item"
          @click.native="changeTheme(item)">
          {{ item }}
        </dropdown-item>
      </dropdown-menu>
    </dropdown>
  </i-menu>
  <footer class="footer">Smart Public WorkManager Ver.1.0.0 Copyright© 株式会社日進サイエンティア</footer>
  <script th:inline="javascript">
    const HEADER = new Vue({
      el: '.header-w',
      data() {
        return {
          baseUrl: SIDER._data.baseUrl,
          session: [[${ session }]],
          themeList: ['デフォルト', 'クラシック', 'ナイト'],
          themes: {
            orange: {
              '--login-svg-fill': 'var(--orange)',
              '--theme-mark': 'var(--orange60)',
              '--filter-svg-icon':'invert(100%) sepia() saturate(23) hue-rotate(0deg)',
              '--dept-select': 'var(--orange)',
              '--sider-background': 'var(--orange60)',
              '--sider-background-actived': 'var(--orange25)',
              '--sider-memu-background': 'var(--orange25)',
              '--sider-memu-icon-color': 'var(--orange)',
              '--sider-memu-icon-bg': 'linear-gradient(-45deg, rgb(255, 242, 234), rgb(255, 234, 217))',
              '--sider-memu-title-background': 'var(--orange50)',
              '--sider-memu-item-border-top': 'var(--orange)',
              '--sider-memu-item-border-bottom': 'var(--dark-red)',
              '--form-label': 'var(--orange60)',
              '--table-head': 'var(--orange60)',
              '--table-head-border': 'var(--orange50)',
              '--table-td-sat': 'var(--orange25)',
              '--spin': 'var(--orange)',
              '--spin-bg': 'rgba(255, 255, 255, .7)',
              '--tree-hover': 'rgb(255,213, 185)',
              '--tree-select': 'rgb(255,213, 185)',
              '--tree-bg': 'var(--orange25)',
              '--tree-border': 'rgb(249, 233, 224)',
              '--primary-info': 'var(--brown-text)',
              '--primary-info-border': 'var(--olive)',
              '--primary-info-bg': 'var(--gold50)',
            },
            blue: {
              '--login-svg-fill': 'var(--theme-blue)',
              '--theme-mark': 'var(--theme-blue)',
              '--filter-svg-icon':'none',
              '--dept-select': 'var(--theme-blue)',
              '--sider-background': 'var(--theme-blue)',
              '--sider-background-actived': 'rgb(240, 250, 255)',
              '--sider-memu-background': 'rgb(240,250,255)',
              '--sider-memu-icon-color': 'var(--theme-blue)',
              '--sider-memu-icon-bg': 'rgba(236, 239, 241, .7)',
              '--sider-memu-title-background': 'rgb(125, 169, 247)',
              '--sider-memu-item-border-top': 'var(--primary)',
              '--sider-memu-item-border-bottom': 'var(--text-green)',
              '--form-label': 'rgb(103, 168, 255)',
              '--table-head': 'rgb(110, 165, 238)',
              '--table-head-border': 'var(--blue25)',
              '--table-td-sat': 'var(--blue25)',
              '--spin': 'var(--theme-blue)',
              '--spin-bg': 'rgba(255, 255, 255, .9)',
              '--tree-hover': 'rgb(213, 232, 252)',
              '--tree-select': 'rgb(234, 244, 254)',
              '--tree-bg': 'var(--light-grey)',
              '--tree-border': 'var(--blue25)',
              '--primary-info': 'var(--primary)',
              '--primary-info-border': 'var(--primary-border)',
            }
          }
        }
      },
      created() {
        this.changeTheme(localStorage.getItem('APP_THEME') || 'デフォルト')
      },
      methods: {
        logout() {
          location.href = '/logout'
        },
        goProfile() {
          // if (this.$route.path === '/sys/user/profile') {
          //   return
          // }
          // this.$router.push('/sys/user/profile')
        },
        changeTheme(e) {
          if(e === 'デフォルト') {
            localStorage.setItem('APP_THEME', e)
            Object.keys(this.themes.orange).forEach(e=>{
              document.documentElement.style.setProperty(e,this.themes.orange[e])
            })
          }
          if(e=== 'クラシック') {
            localStorage.setItem('APP_THEME', e)
            Object.keys(this.themes.blue).forEach(e=>{
              document.documentElement.style.setProperty(e,this.themes.blue[e])
            })
          }

        },
        // 点击顶部边栏时也关闭sider
        handleClickMenuOutSide() {
          SIDER._data.showSider = false
        }
      },
    })
  </script>
</div>