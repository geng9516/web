<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head th:replace="layout/header::common_header(title='mobile login',cssPaths='/pages/mobile.min.css')"></head>

<body>
  <div th:replace="layout/loadingBar::loadingBar"></div>
  <main class="content mobile-warp">
    <div class="content_head">
      <div class="header">
        <div class="title1">
          <h1>
            就業登録
          </h1>
        </div>
      </div>
      <div class="searchwrap">
        <span class="label">年月</span>
        <i-select v-model="curDate" style="flex: 1;" placeholder="選択ください">
          <i-option v-for="(item, index) of 12" :slot="index" :label="item" :value="item">
          </i-option>
        </i-select>
      </div>
    </div>
    <div class="content_body" style="position: relative">
      <i-table :class="tableHeadFixed ? 'table-head-fixed' : ''" :columns="columns" border :disabled-hover="true"
        :data="tableData" :loading="loading">
        <template slot-scope="{ row }" slot="week">
          <span :class="dayRed(row,0)" style="text-decoration: underline">{{ row.TDA_DYYYYMMDD_DY }}</span>
        </template>

        <template slot-scope="{ row }" slot="intDay">
          <span :class="dayRed(row,0)" style="text-decoration: underline">{{ row.TDA_DYYYYMMDD_DD }}</span>
        </template>


        <template slot-scope="{ row }" slot="workConfirm">
          <span v-if="row.TDA_CSTATUSFLG_NAME === '待'" class="confirm-sytle ing">待</span>
          <span v-if="row.TDA_CSTATUSFLG_NAME === '済'" class="confirm-sytle">済</span>
          <span v-if="row.TDA_CSTATUSFLG_NAME === '確'" class="confirm-sytle rest">確</span>
          <span v-if="row.TDA_CSTATUSFLG_NAME === 'エ'" class="confirm-sytle undo">エ</span>
        </template>

        <template slot-scope="{ row }" slot="TDA_CWORKINGID_R_NAME">
          <span :class="dayRed(row,1)">{{ row.TDA_CWORKINGID_R_NAME }}</span>
        </template>

        <template slot-scope="{ row }" slot="action">
          <i-button type="primary" ghost size="small" long>詳細</i-button>
        </template>
      </i-table>
    </div>
  </main>
  <div th:replace="layout/mobileHeader::header"></div>
  <script type="text/babel" th:inline="javascript">
    new Vue({
      el: '.mobile-warp',
      data() {
        return {
          curDate: new Date(),
          loading: false,
          dispMonthlyList: [],       //年月リスト
          query: {
            txtAction: 'ACT_DISP_RMONTHLY',
            txtDYYYYMM: '',
            txtDYYYYMMDD: '',
            today: '',
            selHealthStatus: '',
            psSite: Utils.getUrlParam(location.href, 'psSite'),
            psApp: Utils.getUrlParam(location.href, 'psApp')
          },
          columns: [
            {
              title: '曜日',
              slot: 'week',
              width: 45,
              align: 'center'
            },
            {
              title: '日',
              slot: 'intDay',
              minwidth: 80,
              align: 'center'
            },
            {
              title: '区分',
              slot: 'TDA_CWORKINGID_R_NAME',
              minwidth: 80,
              align: 'center'
            },
            {
              title: '承認',
              slot: 'workConfirm',
              width: 45,
              align: 'center'
            },
            {
              title: ' ',
              slot: 'action',
              align: 'center'
            }
          ],
          tableData: [{
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "火",
            "TDA_DYYYYMMDD": "2020/09/01",
            "TDA_DYYYYMMDD_DD": "01",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "水",
            "TDA_DYYYYMMDD": "2020/09/02",
            "TDA_DYYYYMMDD_DD": "02",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "木",
            "TDA_DYYYYMMDD": "2020/09/03",
            "TDA_DYYYYMMDD_DD": "03",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "金",
            "TDA_DYYYYMMDD": "2020/09/04",
            "TDA_DYYYYMMDD_DD": "04",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "所定休",
            "TMG_HOLFLG": "TMG_HOLFLG|3",
            "TDA_DYYYYMMDD_DY": "土",
            "TDA_DYYYYMMDD": "2020/09/05",
            "TDA_DYYYYMMDD_DD": "05",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|570"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "法定休",
            "TMG_HOLFLG": "TMG_HOLFLG|1",
            "TDA_DYYYYMMDD_DY": "日",
            "TDA_DYYYYMMDD": "2020/09/06",
            "TDA_DYYYYMMDD_DD": "06",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|500"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "月",
            "TDA_DYYYYMMDD": "2020/09/07",
            "TDA_DYYYYMMDD_DD": "07",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "火",
            "TDA_DYYYYMMDD": "2020/09/08",
            "TDA_DYYYYMMDD_DD": "08",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "水",
            "TDA_DYYYYMMDD": "2020/09/09",
            "TDA_DYYYYMMDD_DD": "09",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "木",
            "TDA_DYYYYMMDD": "2020/09/10",
            "TDA_DYYYYMMDD_DD": "10",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "金",
            "TDA_DYYYYMMDD": "2020/09/11",
            "TDA_DYYYYMMDD_DD": "11",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "所定休",
            "TMG_HOLFLG": "TMG_HOLFLG|3",
            "TDA_CNTFSTATUSFLG_NAME": "待",
            "TDA_CNTFSTATUSFLG": "TMG_NTFSTATUS|2",
            "TDA_DYYYYMMDD_DY": "土",
            "TDA_DYYYYMMDD": "2020/09/12",
            "TDA_DYYYYMMDD_DD": "12",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|570"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "法定休",
            "TMG_HOLFLG": "TMG_HOLFLG|1",
            "TDA_DYYYYMMDD_DY": "日",
            "TDA_DYYYYMMDD": "2020/09/13",
            "TDA_DYYYYMMDD_DD": "13",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|500"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "月",
            "TDA_DYYYYMMDD": "2020/09/14",
            "TDA_DYYYYMMDD_DD": "14",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "火",
            "TDA_DYYYYMMDD": "2020/09/15",
            "TDA_DYYYYMMDD_DD": "15",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "水",
            "TDA_DYYYYMMDD": "2020/09/16",
            "TDA_DYYYYMMDD_DD": "16",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_DYYYYMMDD_DD": "17",
            "TDA_CWORKINGID_R": "TMG_WORK|000",
            "TDA_CNTFSTATUSFLG_NAME": "待",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_CNTFSTATUSFLG": "TMG_NTFSTATUS|2",
            "TDA_DYYYYMMDD_DY": "木",
            "TDA_DYYYYMMDD": "2020/09/17",
            "CCOMMENT": " "
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "金",
            "TDA_DYYYYMMDD": "2020/09/18",
            "TDA_DYYYYMMDD_DD": "18",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "所定休",
            "TMG_HOLFLG": "TMG_HOLFLG|3",
            "TDA_DYYYYMMDD_DY": "土",
            "TDA_DYYYYMMDD": "2020/09/19",
            "TDA_DYYYYMMDD_DD": "19",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|570"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "法定休",
            "TMG_HOLFLG": "TMG_HOLFLG|1",
            "TDA_DYYYYMMDD_DY": "日",
            "TDA_DYYYYMMDD": "2020/09/20",
            "TDA_DYYYYMMDD_DD": "20",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|500"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "所定休",
            "TMG_HOLFLG": "TMG_HOLFLG|2",
            "TDA_DYYYYMMDD_DY": "月",
            "TDA_DYYYYMMDD": "2020/09/21",
            "TDA_DYYYYMMDD_DD": "21",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|570"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "所定休",
            "TMG_HOLFLG": "TMG_HOLFLG|2",
            "TDA_DYYYYMMDD_DY": "火",
            "TDA_DYYYYMMDD": "2020/09/22",
            "TDA_DYYYYMMDD_DD": "22",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|570"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_DYYYYMMDD_DD": "23",
            "TDA_CWORKINGID_R": "TMG_WORK|000",
            "TDA_CNTFSTATUSFLG_NAME": "待",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_CNTFSTATUSFLG": "TMG_NTFSTATUS|2",
            "TDA_DYYYYMMDD_DY": "水",
            "TDA_DYYYYMMDD": "2020/09/23",
            "CCOMMENT": " "
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_DYYYYMMDD_DD": "24",
            "TDA_CWORKINGID_R": "TMG_WORK|000",
            "TDA_CNTFSTATUSFLG_NAME": "待",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_CNTFSTATUSFLG": "TMG_NTFSTATUS|2",
            "TDA_DYYYYMMDD_DY": "木",
            "TDA_DYYYYMMDD": "2020/09/24",
            "CCOMMENT": " "
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_DYYYYMMDD_DD": "25",
            "TDA_CWORKINGID_R": "TMG_WORK|000",
            "TDA_CNTFSTATUSFLG_NAME": "待",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_CNTFSTATUSFLG": "TMG_NTFSTATUS|2",
            "TDA_DYYYYMMDD_DY": "金",
            "TDA_DYYYYMMDD": "2020/09/25",
            "CCOMMENT": " "
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "所定休",
            "TMG_HOLFLG": "TMG_HOLFLG|3",
            "TDA_DYYYYMMDD_DY": "土",
            "TDA_DYYYYMMDD": "2020/09/26",
            "TDA_DYYYYMMDD_DD": "26",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|570"
          }, {
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "法定休",
            "TMG_HOLFLG": "TMG_HOLFLG|1",
            "TDA_DYYYYMMDD_DY": "日",
            "TDA_DYYYYMMDD": "2020/09/27",
            "TDA_DYYYYMMDD_DD": "27",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|500"
          }, {
            "TDA_NOPEN_N": "10:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|0",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "20:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_DYYYYMMDD_DY": "月",
            "TDA_DYYYYMMDD": "2020/09/28",
            "TDA_DYYYYMMDD_DD": "28",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_DYYYYMMDD_DD": "29",
            "TDA_CWORKINGID_R": "TMG_WORK|000",
            "TDA_CNTFSTATUSFLG_NAME": "待",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_CNTFSTATUSFLG": "TMG_NTFSTATUS|2",
            "TDA_DYYYYMMDD_DY": "火",
            "TDA_DYYYYMMDD": "2020/09/29",
            "CCOMMENT": " "
          }, {
            "TDA_NOPEN_N": "9:30",
            "TDA_CSTATUSFLG": "TMG_DATASTATUS|2",
            "TDA_CWORKINGID_R_NAME": "出勤",
            "TDA_NCLOSE_N": "18:00",
            "TMG_HOLFLG": "TMG_HOLFLG|0",
            "TDA_CSTATUSFLG_NAME": "エ",
            "TDA_DYYYYMMDD_DY": "水",
            "TDA_DYYYYMMDD": "2020/09/30",
            "TDA_DYYYYMMDD_DD": "30",
            "CCOMMENT": " ",
            "TDA_CWORKINGID_R": "TMG_WORK|000"
          }],
          contentScrollTop: 0
        }
      },
      mounted() {
        window.addEventListener('scroll', this.handleScroll, { passive: true })
      },
      beforeDestroy() {
        window.removeEventListener('scroll', this.handleScroll, { passive: true })
      },
      computed: {
        tableHeadFixed() {
          if (this.contentScrollTop > 118) return true
          else return false
        },
      },
      methods: {
        dayRed(e, i) {
          const dayOfWeek = e.TMG_HOLFLG
          if (i === 0) {
            if (e.TDA_DYYYYMMDD === this.today) {
              return 'brown cursor'
            }

            if (dayOfWeek.trim() === 'TMG_HOLFLG|0') {
              return 'cursor'
            }
            if (dayOfWeek.trim() != 'TMG_HOLFLG|0') {
              return 'blue cursor'
            }

          } else {
            if (e.TDA_DYYYYMMDD === this.today) {
              return 'brown'
            }
            if (dayOfWeek.trim() === 'TMG_HOLFLG|0') {
              return
            }
            if (dayOfWeek.trim() != 'TMG_HOLFLG|0') {
              return 'blue'
            }

          }
        },
        handleScroll: Throttle(function (e) {
          this.contentScrollTop = e.target.documentElement.scrollTop || e.target.body.scrollTop
        }, 50),
      }
    })
  </script>
</body>

</html>