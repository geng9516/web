<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head
    th:replace="layout/header::common_header(title='就業登録',cssPaths='/pages/content.min.css')">
</head>

<body>
    <div th:replace="layout/loadingBar::loadingBar"></div>
    <main class="content monthWorkConfirm-warp">
        <div class="content_head">
            <div class="header">
                <div class="title1">
                    <h1>
                        <Icon type="i-emeer colored"></Icon>
                        就業登録
                    </h1>
                </div>
                <div class="btnbox">
                    <span style="flex:1"></span>
                    <p class="pr15" style="height: 40px;line-height: 45px;font-size: 16px;font-weight: bold;">
                        {{ `現在の承認状況： ${isConfirm ? '承認済' : '未承認'}` }}
                    </p>
                    <!-- 就业承认的部分 -->
                    <!-- <i-button type="primary" size="large" @click="isConfirm = !isConfirm" v-if="isAdmin">
                        {{ isConfirm ? '承認解除' : '月次承認' }}
                      </i-button> -->
                    <i-button type="primary" size="large">月次報告</i-button>
                </div>
            </div>
            <div class="searchwrap">
                <span class="label">年月</span>
                <date-picker class="mar" v-model="curDate" type="month" :editable="false" :clearable="false"
                    @on-change="handleDatePicker" format="yyyy年MM月度"></date-picker>
                <!-- 所属选择器需要按照现在的移植方法，可以问吴san
                <DeptSelector v-if="isAdmin" /> -->
                <!-- 就业承认的部分 -->
                <!-- <span class="label" v-if="isAdmin">氏名</span>
                <span class="input-like-span width15" v-if="isAdmin">{{ `佐藤 雅彦` }}</span> -->
            </div>
        </div>
        <div class="content_body">
            <div class="table-top">
                <Row :gutter="16" class="mb10">
                    <i-Col span="11">
                        <i-button type="text" @click="preMonth">
                            <Icon type="ios-arrow-back"></Icon>
                            前月
                        </i-button>
                        <i-button type="text" @click="nextMonth">
                            翌月
                            <Icon type="ios-arrow-forward"></Icon>
                        </i-button>
                    </i-Col>
                    <i-Col span="13" class="tr">
                        <i-button type="primary" class="mr5" ghost icon="md-add-circle"
                            @click="download(2)">勤務表印刷</i-button>
                    </i-Col>
                </Row>
            </div>
            <!-- 就业承认的部分 -->
            <!-- <Row :gutter="10" class="mt5 mb10" v-if="isAdmin">
                <i-Col span="4">
                    <div class="label">種別</div>
                    <div class="person-info">健栄研_職員 第３種</div>
                </i-Col>
                <i-Col span="7">
                    <div class="label">発令</div>
                    <div class="tl">
                        <div class="person-info">
                            <span class="time">2009/03/01～2009/05/31</span>
                            <span class="with-split">短時間勤務</span>
                        </div>
                        <div class="person-info">
                            <span class="time">2010/04/01～</span>
                            <span class="with-split">復帰支援</span>
                        </div>
                    </div>
                </i-Col>
                <i-Col span="4">
                    <div class="label">変形労働</div>
                    <div class="person-info">2023/03/01～2025/07/31</div>
                </i-Col>
            </Row> -->
            <div class="titlenorm mb10 " style="font-size:15px">
                <Icon type="logo-buffer"></Icon>
                就業実績
            </div>
            <div class="month-sum tl">

                <div class="son" v-for="(item, i) of monthlyTilteMapList" :key="i">
                    <span class="label-monthSum">{{item.title | turnLine}}</span>
                    <span class="num">{{monthlyMap[item.key]}}</span>
                </div>

            </div>
            <i-table class="long-table" @on-row-click="showDay(arguments)" border :columns="columns"
                :row-class-name="rowClass" :disabled-hover="true" :data="data" :loading="loading">
                <template slot-scope="{ row }" slot="TDA_DYYYYMMDD_DD">
                    <span :class="dayRed(row)">{{ row.TDA_DYYYYMMDD_DD }}</span>
                </template>
                <template slot-scope="{ row }" slot="TDA_DYYYYMMDD_DY">
                    <span :class="dayRed(row)">{{ row.TDA_DYYYYMMDD_DY }}</span>
                </template>
                <template slot-scope="{ row }" slot="TDA_CWORKINGID_R_NAME">
                    <span :class="dayRed(row)">{{ row.TDA_CWORKINGID_R_NAME }}</span>
                </template>
                <template slot-scope="{ row }" slot="TDA_CSTATUSFLG_NAME">
                    <span v-if="row.TDA_CSTATUSFLG_NAME === '待'" class="confirm-sytle ing">待</span>
                    <span v-if="row.TDA_CSTATUSFLG_NAME === '済'" class="confirm-sytle">済</span>
                    <span v-if="row.TDA_CSTATUSFLG_NAME === 'エ'" class="confirm-sytle undo">エ</span>
                </template>
                <template slot-scope="{ row }" slot="TDA_CNTFSTATUSFLG_NAME">
                    <span v-if="row.TDA_CNTFSTATUSFLG_NAME === '待'" class="confirm-sytle ing">待</span>
                    <span v-if="row.TDA_CNTFSTATUSFLG_NAME === '済'" class="confirm-sytle">済</span>
                    <span v-if="row.TDA_CNTFSTATUSFLG_NAME === 'エ'" class="confirm-sytle undo">エ</span>
                </template>
            </i-table>
            <!-- 就业承认需要的点开每行出来的Drawer
            <FormDrawer
            :isAdmin="isAdmin"
            title="2020年03月24日(火)"
            :isShow="isShow"
            @close="() => (this.isShow = false)"
          ></FormDrawer>
          位置在
          FormDrawer: () => import('src/components/Function/FormDrawer/FormDrawer') -->
        </div>
    </main>
    <div th:replace="layout/script::common_script"></div>
    <script type="text/babel" th:inline="javascript">
        const WORK_YEAR_SCHEDULE = new Vue({
            // 特别注意要对上这个class
            el: '.monthWorkConfirm-warp',
            data() {
                return {
                    curDate: new Date(),
                    isConfirm: false,
                    loading: false,
                    columns:  [[${ dailyTittleMapList }]].map(e=> {
                        return {
                            ...e,
                            title: e.title.replace(TURN_LINE_STR, '\n')
                        }
                    }),
                    data: [[${ dailyMapList }]],
                    monthlyTilteMapList:[[${monthlyTilteMapList }]],
                    monthlyMap:[[${monthlyMap }]],
                    monthSum: {},
                    dailyShow: true,
                    rawData: [],
                    selectedData: {
                        obj: {},
                        date: ''
                    },
                    isShow: false,
                    index: 0,
                    isConfirm: false,
                    comment: ''

                }
            },
            created() {
                console.log(this.monthlyTilteMapList)
                console.log(this.monthlyMap)
            },
            computed: {
            },
            methods: {
                handleDatePicker() { },
                rowClass(row) {
                    // 不可点击得时候，表格变色
                    // if (!row.memberDivisionCode || (!this.isEmployer && this.monthConfirmFlag)) {
                    //   if (row.dayDivisionCode === '4') {
                    //     return 'sun'
                    //   }
                    //   // 第一条避免错误数据被染上sat色
                    //   if (row.dayDivisionCode && row.dayDivisionCode !== '1') {
                    //     return 'sat'
                    //   }
                    //   return ''
                    // }
                    // 可点击得时候，表格变色
                    if (row.today) {
                        return 'select-col sun'
                    }
                    if (!row.dayDivisionCode || row.dayDivisionCode === '1') {
                        return 'select-col'
                    }
                    return 'select-col sat'
                },
                dayRed(e) {
                    const dayOfWeek = e.TDA_DYYYYMMDD_DY
                    if (!dayOfWeek) {
                        return
                    }
                    if (dayOfWeek.trim() === '土' || dayOfWeek.trim() === '日') {
                        return 'blue'
                    }
                    if (e.today) {
                        return 'brown'
                    }
                },
                showDay: Debounce(function () {
                    this.isShow = true
                }),
                preMonth() {
                },
                nextMonth() {
                },
                download(type) {
                },
                refresh() {
                }
            }
        })
    </script>
</body>

</html>