!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){var n,i;function a(e,t,n){return(a=r()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&c(a,n.prototype),a}).apply(null,arguments)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=["year","month","date","hour","minute","second"],l="value",d="text",h="order",f={month:{natureMin:1,natureMax:12},date:{natureMin:1,natureMax:31},hour:{natureMin:0,natureMax:23},minute:{natureMin:0,natureMax:59},second:{natureMin:0,natureMax:59}},p={year:"YYYY",month:"M",date:"D",hour:"hh",minute:"mm",second:"ss"};function m(e,t){if(e.findIndex)return e.findIndex(t);var n=-1;return e.some((function(e,i,a){var r=t.call(this,e,i,a);if(r)return n=i,r})),n}var x={name:"cube-select",template:'<div class="cube-select" :class="{ \'cube-select_active\': active, \'cube-select_disabled\': disabled }" @click="showPicker">\n  <span v-if="selectedText" class="cube-select-text">{{ selectedText }}</span>\n  <span v-else class="cube-select-placeholder">{{ _placeholder }}</span>\n  <i class="cube-select-icon"></i>\n</div>',data:function(){return{active:!1}},props:{options:{type:Array,default:function(){return[]}},value:null,placeholder:{type:String,default:""},autoPop:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},title:{type:String,default:""},cancelTxt:{type:String,default:""},confirmTxt:{type:String,default:""}},computed:{adaptOptions:function(){return[this.options.map((function(e){return"object"!==s(e)&&(e={value:e,text:e}),e}))]},valueIndex:function(){var e=this.value,t=m(this.adaptOptions[0],(function(t){return t.value===e}));return this.picker&&this.picker.setData(this.adaptOptions,-1!==t?[t]:[0]),t},selectedIndex:function(){return-1!==this.valueIndex?[this.valueIndex]:[0]},selectedText:function(){return-1!==this.valueIndex?this.adaptOptions[0][this.valueIndex].text:""},_placeholder:function(){return this.placeholder||"selectText"},_title:function(){return this.title||"entry time"},_cancelTxt:function(){return this.cancelTxt||"取消"},_confirmTxt:function(){return this.confirmTxt||"選択"}},created:function(){this.picker=this.$createPicker({$props:{title:"_title",data:"adaptOptions",selectedIndex:"selectedIndex",cancelTxt:"_cancelTxt",confirmTxt:"_confirmTxt",zIndex:900},$events:{select:"selectHandler",cancel:this.hided}}),this.autoPop&&this.showPicker()},methods:{showPicker:function(){this.disabled||(this.picker.show(),this.active=!0,this.$emit("picker-show"))},hided:function(){this.active=!1,this.$emit("picker-hide")},selectHandler:function(e,t,n){this.hided(),e[0]!==this.value&&(this.$emit("input",e[0]),this.$emit("change",e[0],t[0],n[0]))}}},y={name:"cube-cascade-picker",template:'<cube-picker\n  ref="picker"\n  v-model="isVisible"\n  :data="pickerData"\n  :selected-index="pickerSelectedIndex"\n  :pending="pending"\n  :title="title"\n  :subtitle="subtitle"\n  :z-index="zIndex"\n  :cancel-txt="_cancelTxt"\n  :confirm-txt="_confirmTxt"\n  :swipe-time="swipeTime"\n  :mask-closable="maskClosable"\n  @select="_pickerSelect"\n  @cancel="_pickerCancel"\n  @change="_pickerChange">\n</cube-picker>',model:{prop:"visible",event:"toggle"},props:u({title:{type:String},subtitle:{type:String},cancelTxt:{type:String,default:""},confirmTxt:{type:String,default:""},swipeTime:{type:Number,default:2500},maskClosable:{type:Boolean,default:!0},async:{type:Boolean,default:!1},data:{type:Array,default:function(){return[]}},selectedIndex:{type:Array,default:function(){return[]}},alias:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},zIndex:{type:Number,default:100}},"maskClosable",{type:Boolean,default:!1}),data:function(){return{cascadeData:this.data.slice(),pickerSelectedIndex:this.selectedIndex.slice(),pickerData:[],pending:!1,isVisible:!1}},watch:{isVisible:function(e){this.$emit("toggle",e)},merge:function(e){this.setData(e[0],e[1])}},mounted:function(){var e=this;this.$watch("visible",(function(t,n){t?e.show():n&&!e._createAPI_reuse&&e.hide()}),{immediate:!0})},created:function(){this._updatePickerData()},computed:{_cancelTxt:function(){return this.cancelTxt||"取消"},_confirmTxt:function(){return this.confirmTxt||"選択"},valueKey:function(){return this.alias.value||l},textKey:function(){return this.alias.text||d},orderKey:function(){return h},merge:function(){return[this.data,this.selectedIndex]}},methods:{show:function(){this.isVisible=!0},hide:function(){this.isVisible=!1},setData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.pending=!1,this.cascadeData=e.slice(),this.pickerSelectedIndex=t.slice(),this._updatePickerData()},_pickerSelect:function(e,t,n){this.$emit("select",e,t,n)},_pickerCancel:function(){this.$emit("cancel")},_pickerChange:function(e,t){t!==this.pickerSelectedIndex[e]&&(this.pickerSelectedIndex.splice(e,1,t),this.async?this.pending=e!==this.pickerData.length-1:this._updatePickerData(e+1)),this.$emit("change",e,t)},_updatePickerData:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.cascadeData,i=0;n;)i>=t&&function(){var a=[];n.forEach((function(t){a.push({value:t[e.valueKey],text:t[e.textKey],order:t[e.orderKey]})})),e.pickerData[i]=a,e.pickerSelectedIndex[i]=0===t?e.pickerSelectedIndex[i]<n.length&&e.pickerSelectedIndex[i]||0:e.$refs.picker.refillColumn(i,a)}(),n=n.length?n[this.pickerSelectedIndex[i]].children:null,i++;i<this.pickerData.length&&this.pickerData.splice(i,this.pickerData.length-i),this.pickerData=this.pickerData.slice()}},components:{CubePicker:cube.picker}};function b(e,t,n,i){if(new RegExp({year:"(Y+)",month:"(M+)",date:"(D+)",hour:"(h+)",minute:"(m+)",second:"(s+)",quarter:"(q+)",millisecond:"(S)"}[e],i).test(t)){var a="year"===e?n.toString().substr(4-RegExp.$1.length):1===RegExp.$1.length?n:function(e){return("00"+e).substr((""+e).length)}(n);t=t.replace(RegExp.$1,a)}return t}function v(e){return[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}var g=(i={name:"DPicker",template:'<cube-cascade-picker\n  v-model="isVisible"\n  :data="data"\n  :selected-index="selectedIndex"\n  :title="title"\n  :subtitle="subtitle"\n  :cancel-txt="_cancelTxt"\n  :confirm-txt="_confirmTxt"\n  :swipe-time="swipeTime"\n  :z-index="zIndex"\n  :mask-closable="maskClosable"\n  @select="_select"\n  @cancel="_cancel"\n  @change="_change">\n</cube-cascade-picker>',data:function(){return{active:!1}},model:{prop:"visible",event:"toggle"},props:(n={title:{type:String},subtitle:{type:String},cancelTxt:{type:String,default:""},confirmTxt:{type:String,default:""},swipeTime:{type:Number,default:2500},maskClosable:{type:Boolean,default:!0},zIndex:{type:Number,default:100}},u(n,"maskClosable",{type:Boolean,default:!1}),u(n,"visible",{type:Boolean,default:!1}),u(n,"min",{type:[Date,Array],default:function(){return new Date(2010,0,1)}}),u(n,"max",{type:[Date,Array],default:function(){return new Date(2020,11,31)}}),u(n,"startColumn",{type:String,default:function(){return"year"}}),u(n,"columnCount",{type:Number,default:3}),u(n,"format",{type:Object,default:function(){return{}}}),u(n,"value",{type:[Date,Array],default:function(){return this.min}}),u(n,"columnOrder",{type:Array,default:function(){return["year","month","date","hour","minute","second"]}}),n)},u(i,"data",(function(){return{isVisible:!1}})),u(i,"watch",{isVisible:function(e){this.$emit("toggle",e)}}),u(i,"mounted",(function(){var e=this;this.$watch("visible",(function(t,n){t?e.show():n&&!e._createAPI_reuse&&e.hide()}),{immediate:!0})})),u(i,"created",(function(){})),u(i,"computed",{_cancelTxt:function(){return this.cancelTxt||"取消"},_confirmTxt:function(){return this.confirmTxt||"選択"},formatConfig:function(){var e=Object.assign({},p);return function e(t,n){for(var i in n)t[i]&&"object"===s(t[i])?e(t[i],n[i]):t[i]=n[i]}(e,this.format),e},natureRangeCache:function(){var e=this,t={hour:[],minute:[],second:[]};return Object.keys(t).forEach((function(n){t[n]=e._range(n,f[n].natureMin,f[n].natureMax)})),t},startIndex:function(){var e=o.indexOf(this.startColumn);return e<0?0:e},minArray:function(){return this.min instanceof Date?v(this.min).slice(this.startIndex,this.startIndex+this.columnCount):this.min},maxArray:function(){return this.max instanceof Date?v(this.max).slice(this.startIndex,this.startIndex+this.columnCount):this.max},valueArray:function(){return this.value instanceof Date?v(this.value).slice(this.startIndex,this.startIndex+this.columnCount):this.value},data:function(){var e=[];return this._generateData(this.startIndex,0,e),e},selectedIndex:function(){for(var e,t=this,n=[],i=this.data,a=function(a){e=m(i,(function(e){return t.valueArray[a]&&e.value===t.valueArray[a]})),n[a]=-1!==e?e:0,i=i[n[a]]&&i[n[a]].children},r=0;r<this.columnCount&&r<6-this.startIndex;r++)a(r);return n}}),u(i,"methods",{show:function(){this.isVisible=!0},hide:function(){this.isVisible=!1},_select:function(e,t,n){this.$emit("select",this._arrayToDate(e),e,n)},_cancel:function(){this.$emit("cancel")},_change:function(e,t){this.$emit("change",e,t)},_generateData:function(e,t,n){var i,a,r,c=this;if(0===t){var u=0===e?this.minArray[0]:Math.max(this.minArray[0],f[o[e]].natureMin),s=0===e?this.maxArray[0]:Math.min(this.maxArray[0],f[o[e]].natureMax);n.push.apply(n,this._range(o[e],u,s,!0,!0))}else if(e<3||n.isMin||n.isMax){var l=2===e?(i=n.value,a=n.year,r=30,[1,3,5,7,8,10,12].indexOf(i)>-1?r=31:2===i&&(r=a&&a%400&&(a%4||!(a%100))?28:29),r):f[o[e]].natureMax,d=n.isMin?Math.max(this.minArray[t],f[o[e]].natureMin):f[o[e]].natureMin,h=n.isMax?Math.min(this.maxArray[t],l):l,p=1===e&&0===this.startIndex&&this.columnCount>=3&&n.value;n.children=this._range(o[e],d,h,n.isMin,n.isMax,p)}else n.children=this.natureRangeCache[o[e]];t<this.columnCount-1&&e<5&&(n.children||n).forEach((function(n){(!n.children||n.isMin||n.isMax)&&c._generateData(e+1,t+1,n)}))},_arrayToDate:function(e){for(var t=[],n=v(new Date(0)),i=0;i<6;i++)i<this.startIndex?t[i]=n[i]:i>=this.startIndex+this.columnCount?t[i]=f[o[i]].natureMin:t[i]=e[i-this.startIndex];return t[1]--,a(Date,t)},_range:function(e,t,n,i,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this._rangeCache||(this._rangeCache={});var c=e+r+t+n+i+a;if(this._rangeCache[c])return this._rangeCache[c];for(var u=[],s=this.formatConfig[e],o=t;o<=n;o++){var l={text:b(e,s,o,"i"),value:o,order:this.columnOrder.indexOf(e)};i&&o===t&&(l.isMin=!0),a&&o===n&&(l.isMax=!0),r&&(l.year=r),u.push(l)}return this._rangeCache[c]=u,u}}),u(i,"components",{cubeCascadePicker:y}),i);cube["create-api"](Vue,cube.picker,["click"],!0),cube["create-api"](Vue,y,["click"],!0),cube["create-api"](Vue,g,["click"],!0),Vue.component("cube-select",x),cube.cascadePicker=y,cube.dPicker=g}]);