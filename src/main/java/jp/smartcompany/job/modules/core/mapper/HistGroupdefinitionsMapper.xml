<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.smartcompany.job.modules.core.mapper.HistGroupdefinitionsMapper">

    <select id="selectGroupDefinitions" parameterType="map" resultType="jp.smartcompany.framework.component.dto.QueryConditionRowDTO">
        SELECT
            HGD_ID AS ID,
            HGD_CCUSTOMERID AS CUSTOMERID,
            HGD_CSYSTEMID AS SYSTEMID,
            HGD_CGROUPID AS GROUPID,
            HGD_DSTARTDATE AS STARTDATE,
            HGD_DENDDATE AS ENDDATE,
            HGD_CANDOR AS ANDOR,
            HGD_COPENEDPARENTHSIS AS OPENEDPARENTHSIS,
            HGD_CTABLEID AS TABLEID,
            HGD_CCOLUMNID AS COLUMNID,
            HGD_CCOLUMNNAME AS COLUMNNAME,
            HGD_CTYPEOFCOLUMN AS TYPEOFCOLUMN,
            HGD_COPERATOR AS OPERATOR,
            HGD_CCOMPANYID AS COMPANYID,
            HGD_CVALUE AS VALUE,
            HGD_CDISPLAYVALUE AS DISPLAYVALUE,
            HGD_CCLOSEDPARENTHSIS AS CLOSEDPARENTHSIS,
            HGD_NSEQ AS SEQ,
            VERSIONNO
        FROM
            HIST_GROUPDEFINITIONS
        WHERE
            HGD_CCUSTOMERID = #{customerId} AND
            HGD_CCOMPANYID = #{companyId} AND
            HGD_CSYSTEMID = #{systemId} AND
            HGD_CGROUPID = #{groupId} AND
            HGD_DSTARTDATE  <![CDATA[<=]]> #{searchDate} AND
            <if test="seq!=null">
                HGD_DENDDATE >= #{searchDate}  AND
                HGD_NSEQ = #{seq}
            </if>
            <if test="seq==null">
                HGD_DENDDATE >= #{searchDate}
            </if>
            ORDER BY HGD_NSEQ
    </select>

    <select id="selectHistGroupDefinitions" parameterType="map" resultType="jp.smartcompany.job.modules.core.pojo.entity.HistGroupdefinitionsDO">
        SELECT
            HGD_ID,
            HGD_CCUSTOMERID,
            HGD_CSYSTEMID,
            HGD_CGROUPID,
            HGD_NSEQ,
            HGD_DSTARTDATE,
            HGD_DENDDATE,
            HGD_CCOMPANYID,
            HGD_CANDOR,
            HGD_COPENEDPARENTHSIS,
            HGD_CTABLEID,
            HGD_CCOLUMNID,
            HGD_CCOLUMNNAME,
            HGD_CTYPEOFCOLUMN,
            HGD_COPERATOR,
            HGD_CVALUE,
            HGD_CDISPLAYVALUE,
            HGD_CCLOSEDPARENTHSIS,
            VERSIONNO
        FROM
            HIST_GROUPDEFINITIONS
        WHERE
            HGD_CCUSTOMERID = #{custId}
            AND HGD_CSYSTEMID = #{systemId}
            AND HGD_CGROUPID = #{groupId}
            <if test="searchDate!=null">
                AND HGD_DSTARTDATE <![CDATA[<=]]> #{searchDate}
                AND HGD_DENDDATE  >= #{searchDate}
            </if>
    </select>

</mapper>